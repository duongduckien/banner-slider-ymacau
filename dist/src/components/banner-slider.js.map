{"version":3,"file":"banner-slider.js","sourceRoot":"","sources":["../../../src/components/banner-slider.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n    Component,\n    NgZone,\n    Input,\n    ElementRef,\n    OnDestroy,\n    OnChanges,\n    AfterViewInit,\n} from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\ndeclare const jQuery: any;\n\n@Component({\n    selector: 'banner-slider-ymacau',\n    templateUrl: 'banner-slider.html',\n    styleUrls: ['banner-slider.scss']\n})\nexport class BannerSliderComponent implements OnDestroy, OnChanges, AfterViewInit {\n\n    @Input() config: any;\n    @Input() slider: any;\n\n    private slideWrapper: any;\n    private lazyImages: any;\n\n    constructor(\n        public zone: NgZone,\n        public domSanitizer: DomSanitizer,\n    ) {\n\n    }\n\n    ngOnInit() {\n\n    }\n\n    ngOnChanges() {\n\n    }\n\n    ngAfterViewInit(): void {\n\n        if (this.slider.length > 0) {\n\n            this.slideWrapper = jQuery('.main-slider');\n            this.lazyImages = this.slideWrapper.find('.slide-image');\n\n            this.zone.runOutsideAngular(() => {\n\n                this.slideWrapper.on('init', (el: any) => {\n                    this.zone.run(() => {\n                        el = jQuery(el.currentTarget);\n                        this.handleActionVideo(el, 'play');\n                    });\n                });\n\n                this.slideWrapper.on('beforeChange', (el: any) => {\n                    this.zone.run(() => {\n                        el = jQuery(el.currentTarget);\n                        this.handleActionVideo(el, 'pause');\n                    });\n                });\n\n                this.slideWrapper.on('afterChange', (el: any) => {\n                    this.zone.run(() => {\n                        el = jQuery(el.currentTarget);\n                        this.handleActionVideo(el, 'play');\n                    });\n                });\n\n                this.slideWrapper.on('lazyLoaded', (el: any) => {\n                    this.zone.run(() => {\n                        this.lazyImages.addClass('show');\n                    });\n                });\n\n                this.slideWrapper.slick({\n                    autoplaySpeed: 4000,\n                    lazyLoad: 'progressive',\n                    speed: 600,\n                    arrows: false,\n                    dots: true,\n                    mobileFirst: true,\n                    waitForAnimate: false,\n                    adaptiveHeight: true,\n                });\n\n            });\n\n        }\n\n    }\n\n    /**\n     * @param  {any} player\n     * @param  {any} command\n     */\n    postMessageToPlayer(player: any, command: any) {\n        if (player == null || command == null) {\n            return;\n        }\n        player.contentWindow.postMessage(JSON.stringify(command), '*');\n    }\n\n    /**\n     * @param  {any} slick\n     * @param  {any} control\n     */\n    handleActionVideo(element: any, control: any) {\n\n        let currentSlide = element.find('.slick-current');\n        let slideType = currentSlide.children().children().attr('class').split(' ')[1];\n        let player = currentSlide.find('iframe').get(0);\n\n        if (slideType === 'vimeo') {\n            switch (control) {\n                case 'play': {\n                    this.postMessageToPlayer(player, {\n                        'method': 'play',\n                        'value': 1,\n                    });\n                    break;\n                }\n                case 'pause': {\n                    this.postMessageToPlayer(player, {\n                        'method': 'pause',\n                        'value': 1,\n                    });\n                    break;\n                }\n            }\n        } else if (slideType === 'youtube') {\n            switch (control) {\n                case 'play': {\n                    this.postMessageToPlayer(player, {\n                        'event': 'command',\n                        'func': 'mute',\n                    });\n                    this.postMessageToPlayer(player, {\n                        'event': 'command',\n                        'func': 'playVideo',\n                    });\n                    break;\n                }\n                case 'pause': {\n                    this.postMessageToPlayer(player, {\n                        'event': 'command',\n                        'func': 'pauseVideo',\n                    });\n                    break;\n                }\n            }\n        } else if (slideType === 'video') {\n            const video = currentSlide.children().children().children().children('video').get(0);\n            if (video != null) {\n                if (control === 'play') {\n                    video.play();\n                } else {\n                    video.pause();\n                }\n            }\n        }\n\n    }\n\n    /**\n     * @param  {string} url\n     * @param  {string} type\n     */\n    createSource(url: string, type: string) {\n        const vimeoConfig = this.config['vimeo']['params'];\n        const youtubeConfig = this.config['youtube']['params'];\n        if (vimeoConfig && youtubeConfig) {\n            switch (type) {\n                case 'youtube': {\n                    return `${url}?${this.queryParams(youtubeConfig)}`;\n                }\n                case 'vimeo': {\n                    return `${url}?${this.queryParams(vimeoConfig)}`;\n                }\n            }\n        }\n    }\n\n    queryParams(params: any) {\n        return Object.keys(params).map((key: any) => `${key}=${params[key]}`).join('&');\n    }\n\n    ngOnDestroy() {\n\n    }\n\n}\n"]}